<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1141px" preserveAspectRatio="none" style="width:1211px;height:1141px;background:#FFFFFF;" version="1.1" viewBox="0 0 1211 1141" width="1211px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="354" x="424.5" y="27.9951">FHIR-VZD Authentisierung mit GesundheitsID</text><rect fill="#F5F5F5" height="1091.7109" style="stroke:#181818;stroke-width:0.5;" width="153" x="497" y="43.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="142" x="500" y="55.3638">VZD-FHIR-Directory</text><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="105.5" y="741.6484"/><rect fill="#FFFFFF" height="96.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="105.5" y="806.9141"/><rect fill="#FFFFFF" height="841.3203" style="stroke:#181818;stroke-width:1.0;" width="10" x="568.5" y="198.2578"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="573.5" y="452.4531"/><rect fill="#FFFFFF" height="59.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="573.5" y="575.9844"/><rect fill="#FFFFFF" height="166.5313" style="stroke:#181818;stroke-width:1.0;" width="10" x="573.5" y="873.0469"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="862.5" y="275.6563"/><rect fill="#FFFFFF" height="206.7969" style="stroke:#181818;stroke-width:1.0;" width="10" x="862.5" y="399.1875"/><rect fill="#FFFFFF" height="148.5313" style="stroke:#181818;stroke-width:1.0;" width="10" x="862.5" y="688.3828"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="862.5" y="932.1797"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1099.5" y="124.8594"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1099.5" y="333.9219"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1099.5" y="510.7188"/><rect fill="none" height="798.1875" style="stroke:#000000;stroke-width:1.5;" width="1184" x="10" y="213.2578"/><rect fill="none" height="133.6641" style="stroke:#000000;stroke-width:1.5;" width="671" x="513" y="237.3906"/><rect fill="none" height="133.6641" style="stroke:#000000;stroke-width:1.5;" width="671" x="513" y="414.1875"/><rect fill="none" height="194.7969" style="stroke:#000000;stroke-width:1.5;" width="922.5" x="20" y="650.1172"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:1.5;" width="902.5" x="30" y="703.3828"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="110" x2="110" y1="93.7266" y2="1100.7109"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="573" x2="573" y1="93.7266" y2="1100.7109"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="867.5" x2="867.5" y1="93.7266" y2="1100.7109"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1104" x2="1104" y1="93.7266" y2="1100.7109"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141" x="40" y="62.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="47" y="82.4248">Client Versicherter</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141" x="40" y="1099.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="47" y="1119.7061">Client Versicherter</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="101" x="523" y="62.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="530" y="82.4248">Auth-Service</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="101" x="523" y="1099.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="530" y="1119.7061">Auth-Service</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="110" x="812.5" y="62.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="819.5" y="82.4248">sektoraler IDP</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="110" x="812.5" y="1099.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="819.5" y="1119.7061">sektoraler IDP</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="139" x="1035" y="62.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="1042" y="82.4248">Federation Master</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="139" x="1035" y="1099.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="1042" y="1119.7061">Federation Master</text><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="105.5" y="741.6484"/><rect fill="#FFFFFF" height="96.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="105.5" y="806.9141"/><rect fill="#FFFFFF" height="841.3203" style="stroke:#181818;stroke-width:1.0;" width="10" x="568.5" y="198.2578"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="573.5" y="452.4531"/><rect fill="#FFFFFF" height="59.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="573.5" y="575.9844"/><rect fill="#FFFFFF" height="166.5313" style="stroke:#181818;stroke-width:1.0;" width="10" x="573.5" y="873.0469"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="862.5" y="275.6563"/><rect fill="#FFFFFF" height="206.7969" style="stroke:#181818;stroke-width:1.0;" width="10" x="862.5" y="399.1875"/><rect fill="#FFFFFF" height="148.5313" style="stroke:#181818;stroke-width:1.0;" width="10" x="862.5" y="688.3828"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="862.5" y="932.1797"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1099.5" y="124.8594"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1099.5" y="333.9219"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1099.5" y="510.7188"/><polygon fill="#181818" points="1087.5,120.8594,1097.5,124.8594,1087.5,128.8594,1091.5,124.8594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="573.5" x2="1093.5" y1="124.8594" y2="124.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="30" x="580.5" y="119.7935">[01]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="614.5" y="119.7935">getEntityStatement</text><polygon fill="#181818" points="584.5,149.9922,574.5,153.9922,584.5,157.9922,580.5,153.9922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="578.5" x2="1103.5" y1="153.9922" y2="153.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="30" x="590.5" y="148.9263">[02]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="231" x="624.5" y="148.9263">Response EntityStatement sekt. IDP</text><polygon fill="#181818" points="556.5,194.2578,566.5,198.2578,556.5,202.2578,560.5,198.2578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="110.5" x2="562.5" y1="198.2578" y2="198.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="30" x="117.5" y="185.6255">[03]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170" x="151.5" y="178.0591">AUTHORIZATION REQUEST</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="155.5" y="193.1919">iss= URL sektoraler IDP</text><path d="M10,213.2578 L80,213.2578 L80,220.3906 L70,230.3906 L10,230.3906 L10,213.2578 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="798.1875" style="stroke:#000000;stroke-width:1.5;" width="1184" x="10" y="213.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="25" x="25" y="226.3247">par</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="103" x="95" y="225.4683">[GesundheitsID]</text><path d="M513,237.3906 L577,237.3906 L577,244.5234 L567,254.5234 L513,254.5234 L513,237.3906 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="133.6641" style="stroke:#000000;stroke-width:1.5;" width="671" x="513" y="237.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="528" y="250.4575">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="63" x="592" y="249.6011">[optional]</text><polygon fill="#181818" points="850.5,271.6563,860.5,275.6563,850.5,279.6563,854.5,275.6563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="578.5" x2="856.5" y1="275.6563" y2="275.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="30" x="585.5" y="270.5903">[04]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161" x="619.5" y="270.5903">getEntityStatement (IDP)</text><polygon fill="#181818" points="589.5,300.7891,579.5,304.7891,589.5,308.7891,585.5,304.7891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="583.5" x2="866.5" y1="304.7891" y2="304.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="30" x="595.5" y="299.7231">[05]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="629.5" y="299.7231">EntityStatement</text><polygon fill="#181818" points="1087.5,329.9219,1097.5,333.9219,1087.5,337.9219,1091.5,333.9219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="578.5" x2="1093.5" y1="333.9219" y2="333.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="30" x="585.5" y="328.856">[06]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179" x="619.5" y="328.856">Fetch EntityStatement (IDP)</text><polygon fill="#181818" points="589.5,359.0547,579.5,363.0547,589.5,367.0547,585.5,363.0547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="583.5" x2="1103.5" y1="363.0547" y2="363.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="30" x="595.5" y="357.9888">[07]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="629.5" y="357.9888">EntityStatement</text><polygon fill="#181818" points="850.5,395.1875,860.5,399.1875,850.5,403.1875,854.5,399.1875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="578.5" x2="856.5" y1="399.1875" y2="399.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="30" x="585.5" y="394.1216">[08]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="209" x="619.5" y="394.1216">AUTHORIZATION REQUEST (PAR)</text><path d="M513,414.1875 L577,414.1875 L577,421.3203 L567,431.3203 L513,431.3203 L513,414.1875 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="133.6641" style="stroke:#000000;stroke-width:1.5;" width="671" x="513" y="414.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="528" y="427.2544">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="63" x="592" y="426.3979">[optional]</text><polygon fill="#181818" points="594.5,448.4531,584.5,452.4531,594.5,456.4531,590.5,452.4531" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="588.5" x2="861.5" y1="452.4531" y2="452.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="30" x="600.5" y="447.3872">[09]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="634.5" y="447.3872">getEntityStatement (RP)</text><polygon fill="#181818" points="850.5,477.5859,860.5,481.5859,850.5,485.5859,854.5,481.5859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="578.5" x2="856.5" y1="481.5859" y2="481.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="30" x="585.5" y="476.52">[10]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="619.5" y="476.52">EntityStatement</text><polygon fill="#181818" points="1087.5,506.7188,1097.5,510.7188,1087.5,514.7188,1091.5,510.7188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="872.5" x2="1093.5" y1="510.7188" y2="510.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="30" x="879.5" y="505.6528">[11]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174" x="913.5" y="505.6528">Fetch EntityStatement (RP)</text><polygon fill="#181818" points="883.5,535.8516,873.5,539.8516,883.5,543.8516,879.5,539.8516" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="877.5" x2="1103.5" y1="539.8516" y2="539.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="30" x="889.5" y="534.7856">[12]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="923.5" y="534.7856">EntityStatement</text><polygon fill="#181818" points="594.5,571.9844,584.5,575.9844,594.5,579.9844,590.5,575.9844" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="588.5" x2="861.5" y1="575.9844" y2="575.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="30" x="600.5" y="570.9185">[13]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="51" x="634.5" y="570.9185">URI-PAR</text><polygon fill="#181818" points="121.5,631.1172,111.5,635.1172,121.5,639.1172,117.5,635.1172" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="115.5" x2="567.5" y1="635.1172" y2="635.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="30" x="127.5" y="630.0513">[14]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="235" x="161.5" y="630.0513">AUTHORIZATION REQUEST (URI-PAR)</text><path d="M20,650.1172 L84,650.1172 L84,657.25 L74,667.25 L20,667.25 L20,650.1172 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="194.7969" style="stroke:#000000;stroke-width:1.5;" width="922.5" x="20" y="650.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="35" y="663.1841">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="190" x="99" y="662.3276">[Implementierungsspezifisch]</text><polygon fill="#181818" points="850.5,684.3828,860.5,688.3828,850.5,692.3828,854.5,688.3828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="110.5" x2="856.5" y1="688.3828" y2="688.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="30" x="117.5" y="683.3169">[15]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="235" x="151.5" y="683.3169">AUTHORIZATION REQUEST (URI-PAR)</text><path d="M30,703.3828 L94,703.3828 L94,710.5156 L84,720.5156 L30,720.5156 L30,703.3828 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:1.5;" width="902.5" x="30" y="703.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="45" y="716.4497">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="63" x="109" y="715.5933">[optional]</text><polygon fill="#181818" points="126.5,737.6484,116.5,741.6484,126.5,745.6484,122.5,741.6484" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="120.5" x2="861.5" y1="741.6484" y2="741.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="30" x="132.5" y="736.5825">[16]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="166.5" y="736.5825">Login, user consent</text><polygon fill="#181818" points="850.5,766.7813,860.5,770.7813,850.5,774.7813,854.5,770.7813" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="110.5" x2="856.5" y1="770.7813" y2="770.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="30" x="117.5" y="765.7153">[17]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="151.5" y="765.7153">credentials, Consent</text><polygon fill="#181818" points="126.5,802.9141,116.5,806.9141,126.5,810.9141,122.5,806.9141" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="120.5" x2="861.5" y1="806.9141" y2="806.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="30" x="132.5" y="801.8481">[18]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="239" x="166.5" y="801.8481">Redirect to redirect URL, AUTH_CODE</text><polygon fill="#181818" points="561.5,869.0469,571.5,873.0469,561.5,877.0469,565.5,873.0469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="115.5" x2="567.5" y1="873.0469" y2="873.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="30" x="122.5" y="867.981">[19]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80" x="156.5" y="867.981">AUTH_CODE</text><polygon fill="#181818" points="850.5,928.1797,860.5,932.1797,850.5,936.1797,854.5,932.1797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="583.5" x2="856.5" y1="932.1797" y2="932.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="30" x="590.5" y="927.1138">[20]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80" x="624.5" y="927.1138">AUTH_CODE</text><polygon fill="#181818" points="594.5,957.3125,584.5,961.3125,594.5,965.3125,590.5,961.3125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="588.5" x2="866.5" y1="961.3125" y2="961.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="30" x="600.5" y="956.2466">[21]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="634.5" y="956.2466">ID_TOKEN, (ACCESS_TOKEN)</text><line style="stroke:#181818;stroke-width:1.0;" x1="583.5" x2="625.5" y1="990.4453" y2="990.4453"/><line style="stroke:#181818;stroke-width:1.0;" x1="625.5" x2="625.5" y1="990.4453" y2="1003.4453"/><line style="stroke:#181818;stroke-width:1.0;" x1="584.5" x2="625.5" y1="1003.4453" y2="1003.4453"/><polygon fill="#181818" points="594.5,999.4453,584.5,1003.4453,594.5,1007.4453,590.5,1003.4453" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="30" x="590.5" y="985.3794">[22]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="624.5" y="985.3794">Erzeuge search-accesstoken</text><polygon fill="#181818" points="121.5,1035.5781,111.5,1039.5781,121.5,1043.5781,117.5,1039.5781" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="115.5" x2="572.5" y1="1039.5781" y2="1039.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="30" x="127.5" y="1034.5122">[23]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="378" x="161.5" y="1034.5122">Response AUTHORIZATION REQUEST (search-accesstoken)</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1204" x="0" y="1068.1445"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1204" y1="1068.1445" y2="1068.1445"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1204" y1="1071.1445" y2="1071.1445"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="157" x="523.5" y="1057.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="138" x="529.5" y="1073.645">...fachlicher flow...</text><!--MD5=[71a86ebc4fee102278d329407bd58373]
@startuml
autonumber 1 1 "<b>[00]"
title "FHIR-VZD Authentisierung mit GesundheitsID"

participant VClient as "Client Versicherter"

box VZD-FHIR-Directory #WhiteSmoke
    participant "Auth-Service" as VzdAuth
end box
participant sekIDP as "sektoraler IDP" 
participant "Federation Master" as fedMaster


VzdAuth->fedMaster++: getEntityStatement
fedMaster- ->VzdAuth: Response EntityStatement sekt. IDP
deactivate fedMaster

VClient->VzdAuth++: AUTHORIZATION REQUEST \n iss= URL sektoraler IDP

par GesundheitsID

alt optional
VzdAuth->sekIDP++: getEntityStatement (IDP)
sekIDP- ->VzdAuth: EntityStatement
deactivate sekIDP
VzdAuth->fedMaster++: Fetch EntityStatement (IDP)
fedMaster- ->VzdAuth: EntityStatement
deactivate fedMaster
end

VzdAuth->sekIDP++: AUTHORIZATION REQUEST (PAR)

alt optional
sekIDP->VzdAuth++: getEntityStatement (RP)
VzdAuth- ->sekIDP: EntityStatement
deactivate VzdAuth
sekIDP->fedMaster++: Fetch EntityStatement (RP)
fedMaster- ->sekIDP: EntityStatement
deactivate fedMaster
end

sekIDP- ->VzdAuth++: URI-PAR
deactivate sekIDP

VzdAuth- ->VClient: AUTHORIZATION REQUEST (URI-PAR)
deactivate VzdAuth

alt Implementierungsspezifisch
VClient->sekIDP++:  AUTHORIZATION REQUEST (URI-PAR)

alt optional
sekIDP- ->VClient++: Login, user consent
VClient->sekIDP: credentials, Consent
deactivate VClient

deactivate fedMaster
end

sekIDP- ->VClient++: Redirect to redirect URL, AUTH_CODE
deactivate sekIDP

end

VClient->VzdAuth++: AUTH_CODE
deactivate VClient
VzdAuth->sekIDP++: AUTH_CODE
sekIDP- ->VzdAuth: ID_TOKEN, (ACCESS_TOKEN)
deactivate sekIDP
VzdAuth->VzdAuth: Erzeuge search-accesstoken

end

VzdAuth- ->VClient: Response AUTHORIZATION REQUEST (search-accesstoken)
deactivate VzdAuth
deactivate VzdAuth

== ...fachlicher flow... ==
@enduml

PlantUML version 1.2022.13(Sat Nov 19 13:22:17 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>