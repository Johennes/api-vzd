<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="693.75px" preserveAspectRatio="none" style="width:1107px;height:693px;background:#FFFFFF;" version="1.1" viewBox="0 0 1107 693" width="1107.2917px" zoomAndPan="magnify"><defs/><g><rect fill="#F5F5F5" height="681.2907" style="stroke:#181818;stroke-width:0.5208333333333334;" width="326.0417" x="588.5417" y="6.25"/><text fill="#000000" font-family="sans-serif" font-size="16.6667" font-weight="bold" lengthAdjust="spacing" textLength="181.25" x="658.3333" y="21.7204">VZD-FHIR-Directory</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="5.2083" x="839.5833" y="22.4574"> </text><rect fill="#FFFFFF" height="530.6152" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="114.5833" y="94.8486"/><rect fill="#FFFFFF" height="74.235" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="417.7083" y="94.8486"/><rect fill="#FFFFFF" height="30.3467" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="688.5417" y="360.6771"/><rect fill="#FFFFFF" height="30.3467" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="688.5417" y="469.5638"/><rect fill="#FFFFFF" height="30.3467" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="688.5417" y="578.4505"/><rect fill="#FFFFFF" height="74.235" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="852.6042" y="215.1937"/><rect fill="none" height="94.3034" style="stroke:#000000;stroke-width:1.5625;" width="794.7917" x="10.4167" y="305.0537"/><rect fill="none" height="94.3034" style="stroke:#000000;stroke-width:1.5625;" width="794.7917" x="10.4167" y="413.9404"/><rect fill="none" height="94.3034" style="stroke:#000000;stroke-width:1.5625;" width="794.7917" x="10.4167" y="522.8271"/><line style="stroke:#181818;stroke-width:0.5208333333333334;stroke-dasharray:5.0,5.0;" x1="119.7917" x2="119.7917" y1="62.4186" y2="634.8389"/><line style="stroke:#181818;stroke-width:0.5208333333333334;stroke-dasharray:5.0,5.0;" x1="422.9167" x2="422.9167" y1="62.4186" y2="634.8389"/><line style="stroke:#181818;stroke-width:0.5208333333333334;stroke-dasharray:5.0,5.0;" x1="693.75" x2="693.75" y1="62.4186" y2="634.8389"/><line style="stroke:#181818;stroke-width:0.5208333333333334;stroke-dasharray:5.0,5.0;" x1="857.2917" x2="857.2917" y1="62.4186" y2="634.8389"/><rect fill="#E3E3E3" height="48.5352" rx="2.6042" ry="2.6042" style="stroke:#181818;stroke-width:0.5208333333333334;" width="197.9167" x="20.8333" y="12.8418"/><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="183.3333" x="28.125" y="33.67">TI-Messenger-Fachdienst</text><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="150" x="44.7917" y="50.646">Registrierungsdienst</text><rect fill="#E3E3E3" height="48.5352" rx="2.6042" ry="2.6042" style="stroke:#181818;stroke-width:0.5208333333333334;" width="197.9167" x="20.8333" y="633.7972"/><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="183.3333" x="28.125" y="654.6254">TI-Messenger-Fachdienst</text><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="150" x="44.7917" y="671.6014">Registrierungsdienst</text><rect fill="#E3E3E3" height="48.5352" rx="2.6042" ry="2.6042" style="stroke:#181818;stroke-width:0.5208333333333334;" width="110.4167" x="367.7083" y="12.8418"/><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="76.0417" x="384.8958" y="33.67">TI-Provider</text><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="95.8333" x="375" y="50.646">OAuth-Server</text><rect fill="#E3E3E3" height="48.5352" rx="2.6042" ry="2.6042" style="stroke:#181818;stroke-width:0.5208333333333334;" width="110.4167" x="367.7083" y="633.7972"/><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="76.0417" x="384.8958" y="654.6254">TI-Provider</text><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="95.8333" x="375" y="671.6014">OAuth-Server</text><rect fill="#E3E3E3" height="31.5592" rx="2.6042" ry="2.6042" style="stroke:#181818;stroke-width:0.5208333333333334;" width="202.0833" x="592.7083" y="29.8177"/><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="187.5" x="600" y="50.646">VZD FHIR TIM-Provider-API</text><rect fill="#E3E3E3" height="31.5592" rx="2.6042" ry="2.6042" style="stroke:#181818;stroke-width:0.5208333333333334;" width="202.0833" x="592.7083" y="633.7972"/><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="187.5" x="600" y="654.6254">VZD FHIR TIM-Provider-API</text><rect fill="#E3E3E3" height="31.5592" rx="2.6042" ry="2.6042" style="stroke:#181818;stroke-width:0.5208333333333334;" width="105.2083" x="805.2083" y="29.8177"/><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="90.625" x="812.5" y="50.646">Auth-Service</text><rect fill="#E3E3E3" height="31.5592" rx="2.6042" ry="2.6042" style="stroke:#181818;stroke-width:0.5208333333333334;" width="105.2083" x="805.2083" y="633.7972"/><text fill="#000000" font-family="sans-serif" font-size="14.5833" lengthAdjust="spacing" textLength="90.625" x="812.5" y="654.6254">Auth-Service</text><rect fill="#FFFFFF" height="530.6152" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="114.5833" y="94.8486"/><rect fill="#FFFFFF" height="74.235" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="417.7083" y="94.8486"/><rect fill="#FFFFFF" height="30.3467" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="688.5417" y="360.6771"/><rect fill="#FFFFFF" height="30.3467" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="688.5417" y="469.5638"/><rect fill="#FFFFFF" height="30.3467" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="688.5417" y="578.4505"/><rect fill="#FFFFFF" height="74.235" style="stroke:#181818;stroke-width:1.0416666666666667;" width="10.4167" x="852.6042" y="215.1937"/><polygon fill="#181818" points="405.2083,90.682,415.625,94.8486,405.2083,99.0153,409.375,94.8486" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="125" x2="411.4583" y1="94.8486" y2="94.8486"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="132.2917" y="89.5716">[01]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="242.7083" x="167.7083" y="89.5716">POST /token (client_id, client_secret)</text><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="428.125" x2="471.875" y1="125.1953" y2="125.1953"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="471.875" x2="471.875" y1="125.1953" y2="138.737"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="429.1667" x2="471.875" y1="138.737" y2="138.737"/><polygon fill="#181818" points="439.5833,134.5703,429.1667,138.737,439.5833,142.9036,435.4167,138.737" style="stroke:#181818;stroke-width:1.0416666666666667;"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="435.4167" y="119.9183">[02]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="210.4167" x="470.8333" y="119.9183">prüfe client_id und client_secret</text><polygon fill="#181818" points="136.4583,164.917,126.0417,169.0837,136.4583,173.2503,132.2917,169.0837" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;stroke-dasharray:2.0,2.0;" x1="130.2083" x2="421.875" y1="169.0837" y2="169.0837"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="142.7083" y="163.8067">[03]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="156.25" x="178.125" y="163.8067">ti-provider-accesstoken</text><polygon fill="#181818" points="840.1042,211.027,850.5208,215.1937,840.1042,219.3604,844.2708,215.1937" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="125" x2="846.3542" y1="215.1937" y2="215.1937"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="132.2917" y="202.035">[04]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="191.6667" x="167.7083" y="194.1533">GET /ti-provider-authenticate</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="322.9167" x="167.7083" y="209.9167">(Authorization: "Bearer ti-provider-accesstoken")</text><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="863.0208" x2="906.7708" y1="245.5404" y2="245.5404"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="906.7708" x2="906.7708" y1="245.5404" y2="259.082"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="864.0625" x2="906.7708" y1="259.082" y2="259.082"/><polygon fill="#181818" points="874.4792,254.9154,864.0625,259.082,874.4792,263.2487,870.3125,259.082" style="stroke:#181818;stroke-width:1.0416666666666667;"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="870.3125" y="240.2634">[05]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="194.7917" x="905.7292" y="240.2634">prüfe ti-provider-accesstoken</text><polygon fill="#181818" points="136.4583,285.262,126.0417,289.4287,136.4583,293.5954,132.2917,289.4287" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;stroke-dasharray:2.0,2.0;" x1="130.2083" x2="856.7708" y1="289.4287" y2="289.4287"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="142.7083" y="284.1517">[06]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="142.7083" x="178.125" y="284.1517">provider-accesstoken</text><path d="M10.4167,305.0537 L119.7917,305.0537 L119.7917,312.4837 L109.375,322.9004 L10.4167,322.9004 L10.4167,305.0537 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5625;"/><rect fill="none" height="94.3034" style="stroke:#000000;stroke-width:1.5625;" width="794.7917" x="10.4167" y="305.0537"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="62.5" x="26.0417" y="318.6651">optional</text><polygon fill="#181818" points="676.0417,356.5104,686.4583,360.6771,676.0417,364.8438,680.2083,360.6771" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="125" x2="682.2917" y1="360.6771" y2="360.6771"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="132.2917" y="347.5184">[07]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="246.875" x="167.7083" y="339.6367">GET /tim-provider-services/federation</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="304.1667" x="167.7083" y="355.4001">(Authorization: "Bearer provider-accesstoken)</text><polygon fill="#181818" points="136.4583,386.8571,126.0417,391.0238,136.4583,395.1904,132.2917,391.0238" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;stroke-dasharray:2.0,2.0;" x1="130.2083" x2="692.7083" y1="391.0238" y2="391.0238"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="142.7083" y="385.7468">[08]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="311.4583" x="178.125" y="385.7468">HTTP 200 OK Response body domainArray json</text><path d="M10.4167,413.9404 L119.7917,413.9404 L119.7917,421.3704 L109.375,431.7871 L10.4167,431.7871 L10.4167,413.9404 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5625;"/><rect fill="none" height="94.3034" style="stroke:#000000;stroke-width:1.5625;" width="794.7917" x="10.4167" y="413.9404"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="62.5" x="26.0417" y="427.5518">optional</text><polygon fill="#181818" points="676.0417,465.3971,686.4583,469.5638,676.0417,473.7305,680.2083,469.5638" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="125" x2="682.2917" y1="469.5638" y2="469.5638"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="132.2917" y="456.4051">[09]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="391.6667" x="167.7083" y="448.5235">GET /tim-provider-services/FederationList/federationList.jws</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="304.1667" x="167.7083" y="464.2868">(Authorization: "Bearer provider-accesstoken)</text><polygon fill="#181818" points="136.4583,495.7438,126.0417,499.9105,136.4583,504.0771,132.2917,499.9105" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;stroke-dasharray:2.0,2.0;" x1="130.2083" x2="692.7083" y1="499.9105" y2="499.9105"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="142.7083" y="494.6335">[10]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="316.6667" x="178.125" y="494.6335">HTTP 200 OK Response body federationList json</text><path d="M10.4167,522.8271 L119.7917,522.8271 L119.7917,530.2572 L109.375,540.6738 L10.4167,540.6738 L10.4167,522.8271 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5625;"/><rect fill="none" height="94.3034" style="stroke:#000000;stroke-width:1.5625;" width="794.7917" x="10.4167" y="522.8271"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="62.5" x="26.0417" y="536.4385">optional</text><polygon fill="#181818" points="676.0417,574.2839,686.4583,578.4505,676.0417,582.6172,680.2083,578.4505" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;" x1="125" x2="682.2917" y1="578.4505" y2="578.4505"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="132.2917" y="565.2918">[11]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="432.2917" x="167.7083" y="557.4102">GET /tim-provider-services/localization?mxid=[MXID in URL Form]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="304.1667" x="167.7083" y="573.1735">(Authorization: "Bearer provider-accesstoken)</text><polygon fill="#181818" points="136.4583,604.6305,126.0417,608.7972,136.4583,612.9639,132.2917,608.7972" style="stroke:#181818;stroke-width:1.0416666666666667;"/><line style="stroke:#181818;stroke-width:1.0416666666666667;stroke-dasharray:2.0,2.0;" x1="130.2083" x2="692.7083" y1="608.7972" y2="608.7972"/><text fill="#000000" font-family="sans-serif" font-size="13.5417" font-weight="bold" lengthAdjust="spacing" textLength="31.25" x="142.7083" y="603.5202">[12]</text><text fill="#000000" font-family="sans-serif" font-size="13.5417" lengthAdjust="spacing" textLength="477.0833" x="178.125" y="603.5202">HTTP 200 OK Response body &lt;enum: [org, pract, orgPract, none]&gt; json</text><!--MD5=[b850b1872aef395ddea02647cc0d22e4]
@startuml SequenceDiagram.FHIR-Directory.tim_provider_services
skinparam dpi 100
skinparam WrapWidth 200
skinparam monochrome true
autonumber "<b>[00]"

participant rd as "TI-Messenger-Fachdienst\nRegistrierungsdienst"
participant oa as "TI-Provider\nOAuth-Server"
box <size:16>VZD-FHIR-Directory</size> #WhiteSmoke
participant fp as "VZD FHIR TIM-Provider-API"
participant fa as "Auth-Service"
end box

rd -> oa: POST /token (client_id, client_secret)
activate rd
activate oa
oa -> oa: prüfe client_id und client_secret
oa - -> rd: ti-provider-accesstoken
deactivate oa

rd -> fa: GET /ti-provider-authenticate\n(Authorization: "Bearer ti-provider-accesstoken")
activate fa
fa -> fa: prüfe ti-provider-accesstoken
fa - -> rd: provider-accesstoken
deactivate fa

group optional
rd -> fp: GET /tim-provider-services/federation\n(Authorization: "Bearer provider-accesstoken)
activate fp
fp - -> rd: HTTP 200 OK Response body domainArray json
deactivate fp
end
group optional
rd -> fp: GET /tim-provider-services/FederationList/federationList.jws\n(Authorization: "Bearer provider-accesstoken)
activate fp
fp - -> rd: HTTP 200 OK Response body federationList json
deactivate fp
end
group optional
rd -> fp: GET /tim-provider-services/localization?mxid=[MXID in URL Form]\n(Authorization: "Bearer provider-accesstoken)
activate fp
fp - -> rd: HTTP 200 OK Response body <enum: [org, pract, orgPract, none]> json
deactivate fp
end

@enduml

PlantUML version 1.2022.13(Sat Nov 19 13:22:17 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>